{
  "_id": "GM8OJxaGgRXhoDTn",
  "name": "Summon Spirit",
  "type": "feat",
  "img": "systems/pf1/icons/skills/violet_02.jpg",
  "system": {
    "description": {
      "value": "<p>The witch calls forth the ghost of a humanoid creature with no more than 18 Hit Dice. The ghost has its own personality and desires, but is willing to bargain with the witch, as if she had cast @Compendium[pf1.spells.0wamdkl9gp19l55w]{Planar Ally, Greater}. To seal an agreement with the witch, the ghost requires life energy equal to 1 temporary negative level (this is in addition to the standard payment for the ghost's service).</p>\n<p>This negative level persists as long as the ghost remains in the service of the witch; the witch can end the agreement as a standard action, immediately removing the negative level.</p>"
    },
    "tags": ["Hex", "Grand Hex"],
    "actions": [
      {
        "_id": "OtYIGatPh6Zpum2L",
        "name": "Seal Bargain",
        "img": "systems/pf1/icons/skills/violet_02.jpg",
        "tag": "start",
        "activation": {
          "type": "nonaction",
          "unchained": {
            "type": "nonaction"
          }
        },
        "actionType": ""
      },
      {
        "_id": "pp2yj60g1XyfGxu8",
        "name": "End Agreement",
        "img": "systems/pf1/icons/skills/violet_02.jpg",
        "tag": "end",
        "activation": {
          "type": "standard",
          "unchained": {
            "cost": 2,
            "type": "action"
          }
        },
        "duration": {
          "units": "inst"
        },
        "range": {
          "units": "unlimited"
        },
        "actionType": ""
      }
    ],
    "tag": "classFeat_summonSpirit",
    "useCustomTag": true,
    "scriptCalls": [
      {
        "_id": "4gd4mYGD61Urb28B",
        "name": "Bargain Negative Level Adjust",
        "img": "icons/svg/dice-target.svg",
        "type": "script",
        "value": "const tag = shared.attackData.action.tag;\nconst nl = actor.system.attributes.energyDrain || 0;\nif (tag === \"start\") {\nactor.update({\"system.attributes.energyDrain\": nl + 1})\n}\nelse if (tag === \"end\") {\nactor.update({\"system.attributes.energyDrain\": Math.max(0, nl - 1)})  \n}",
        "category": "use",
        "hidden": false
      }
    ],
    "subType": "classFeat",
    "associations": {
      "classes": ["Witch"]
    },
    "abilityType": "sp"
  }
}
