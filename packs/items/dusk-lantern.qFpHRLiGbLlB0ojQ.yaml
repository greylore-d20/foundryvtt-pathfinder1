_id: qFpHRLiGbLlB0ojQ
_key: '!items!qFpHRLiGbLlB0ojQ'
folder: BzkdxtDgGZ96mdwR
img: icons/sundries/lights/lantern-bullseye-signal-copper.webp
name: Dusk lantern
system:
  actions:
    - _id: ZYS9AbexStDFF0x6
      activation:
        type: nonaction
        unchained:
          type: nonaction
      duration:
        units: hour
        value: '6'
      name: Ignite
      tag: ignite
    - _id: NFOtBwZottNCSOiI
      activation:
        type: nonaction
        unchained:
          type: nonaction
      name: Extinguish
      tag: extinguish
  description:
    value: >-
      <p>This specialized
      @UUID[Compendium.pf1.items.Item.e9tokjwpM4sqNd2I]{bullseye lantern} has a
      ruby lens that covers the original lens, providing a deep crimson hue to
      the lantern's light, allowing for more stealth when used in areas of
      darkness. This special lens can be set in place or removed as a swift
      action. While the ruby lens is in place, the lantern only provides dim
      light in a 60-foot cone. A dusk lantern's red light is imperceptible to
      creatures relying on darkvision as their sole form of sight.</p>
  equipped: false
  price: 35
  scriptCalls:
    - _id: IORRaBi4vFxCGnJN
      category: use
      hidden: false
      img: icons/svg/dice-target.svg
      name: Turn on light
      type: script
      value: |-
        if (!token) return;
        if (action.tag !== "ignite") return;

        const light = token.document.light;

        // Set lamp light as Foundry light configuration
        const flameAnimation = {
          type: "flame",
          speed: 2,
          intensity: 1,
        };
        const lightSource = {
          dim: 60,
          color: "#a80000",
          alpha: 0.3,
          angle: 45,
          animation: {...flameAnimation},
        };

        token.document.update({light: {...lightSource}});
    - _id: vvG5WJlOtFM77t1K
      category: use
      hidden: false
      img: icons/svg/dice-target.svg
      name: Turn off light
      type: script
      value: |-
        if (!token) return;
        if (action.tag !== "extinguish") return;

        // Lights off as it comes from Foundry default
        const lightOff = new foundry.data.LightData().toObject();
        token.document.update({light: {...lightOff}});
  sources:
    - id: PZO9481
      pages: '12'
  subType: adventuring
  weight:
    value: 4
type: loot

